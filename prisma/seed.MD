# Documentaci贸n del Archivo de Semilla (seed.ts)

##  Visi贸n General

Este archivo proporciona los datos iniciales para la base de datos del proyecto CalenConnect, creando entidades interrelacionadas que permiten probar la aplicaci贸n con datos realistas.

##  Estructura y Flujo de Ejecuci贸n

El script sigue un orden l贸gico basado en las dependencias entre entidades:

1. **Limpieza de datos existentes**
2. **Creaci贸n de usuarios** (profesionales y pacientes)
3. **Generaci贸n de disponibilidad** para profesionales
4. **Programaci贸n de citas** entre pacientes y profesionales
5. **Creaci贸n de notificaciones** asociadas a citas
6. **Generaci贸n de registros de auditor铆a**
7. **Configuraci贸n del sistema**

##  Entidades Principales

### Usuarios (`seedUsers`)
- **Profesionales**: Incluye 2 profesionales con UUIDs fijos (Ana y Carlos) y otros generados din谩micamente.
- **Pacientes**: Incluye 2 pacientes con UUIDs fijos (Elena y Miguel) y otros generados din谩micamente.
- **Correos Electr贸nicos**: 
  - Ana: `xodedak293@amgens.com`
  - Carlos: `kilomi8050@avulos.com` 
  - Elena: `cadaj82929@amgens.com`
  - Miguel: `rofijo8238@amgens.com`

### Disponibilidad (`seedAvailability`)
- Bloques horarios de **1 hora** (8:00-9:00, 9:00-10:00, etc.)
- ltimo bloque del d铆a de **2 horas** (18:00-20:00)
- Disponibilidad especial para profesionales con UUID fijo para garantizar espacios para citas pasadas, futuras y canceladas.

### Citas (`seedAppointments`)
- Siempre duran **1 hora**
- Para pacientes con UUID fijo:
  - 2 citas **completadas** (pasadas)
  - 2 citas **programadas** (futuras)
  - 1 cita **cancelada**
- Las citas solo se asignan en **espacios disponibles ya registrados**
- Sistema de prevenci贸n de **solapamientos** tanto para profesionales como para pacientes

### Notificaciones (`seedNotifications`)
- Tipos: confirmaci贸n, recordatorio y cancelaci贸n
- Enviadas a ambos participantes (profesional y paciente)

### Registros de Auditor铆a (`seedAuditLogs`)
- Acciones: inicio de sesi贸n, creaci贸n de cita, cancelaci贸n y actualizaci贸n de perfil

### Configuraci贸n (`seedConfiguration`)
- Valores por defecto para recordatorios, l铆mites de cancelaci贸n y duraci贸n de citas

##  Funciones Auxiliares

### `createLocalDate`
Crea fechas ajustadas a la zona horaria local (Am茅rica/Bogota).

### `createAvailabilitySlot`
Helper para crear slots de disponibilidad con formato consistente.

### `findAvailableSlot`
Busca un slot disponible en el mapa de disponibilidades existentes.

### `isSlotAvailable`
Verifica que un horario no tenga conflictos por solapamiento.

### `markSlotAsBooked`
Registra un slot como ocupado para evitar futuros solapamientos.

## 锔 Restricciones Importantes

1. **Duraci贸n de citas**: Siempre 1 hora exacta
2. **Estructura de disponibilidad**:
   - Bloques horarios de 1 hora
   - ltimo bloque del d铆a obligatoriamente de 2 horas
3. **Asignaci贸n de citas para pacientes con UUID fijo**:
   - Solo en espacios ya parametrizados como disponibles
   - Sin solapamientos entre citas

##  Flujo de Asignaci贸n de Citas

1. Obtener todas las disponibilidades existentes
2. Mapear disponibilidades por profesional y fecha
3. Para cada combinaci贸n de paciente-profesional con UUID fijo:
   - Buscar slots para las citas pasadas, futuras y canceladas
   - Verificar disponibilidad y ausencia de conflictos
   - Marcar slots como ocupados al asignar citas
4. Actualizar el estado de los slots de disponibilidad utilizados

##  Resultado

El script genera un conjunto coherente de datos que permite probar todas las funcionalidades del sistema, manteniendo la integridad de las relaciones y respetando las reglas de negocio.

##  Uso

El script se ejecuta autom谩ticamente cuando se invoca mediante:
```bash
npm run seed
```

Al finalizar, muestra informaci贸n detallada sobre el n煤mero de entidades creadas y el tiempo de ejecuci贸n.
